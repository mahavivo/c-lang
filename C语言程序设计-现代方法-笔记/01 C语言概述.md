## 1.1	C语言的历史

### 1.1.1	起源

**简介：** c语言是在贝尔实验室由`Ken Thompson` `Dennis Ritchie`及其同事在开发UNIX操作系统的过程中的副产品。

```flow
st=>start: 1969
e=>end: 1973

op1=>operation: 1969年，Thompson独自动手使用汇编语言编写了UNIX操作系统的最初版本
op2=>operation: Thompson在BCPL语言（基于ALGOL 60）的基础上开发B语言
op3=>operation: 1970年，B语言经过改进运行在PDP-11上
op4=>operation: 1971年，B语言暴露出不适合PDP-11的问题
op5=>operation: Ritchie开始开发B语言的升级版，NB（“New B”）
op6=>operation: NB越来越脱离B，改名C语言

st->op1->op2->op3->op4->op5->op6->e

```

### 1.1.2	标准化

**注意：** C语言目前最新标准是1999年修订的`C99`(ISO 9899:1999)，但没有得到广泛应用。

```flow
st=>start: 1978
e=>end: 1990
op1=>operation: 1978年，《The C Programming Language》第一版出版，成为事实标准，即经典C（K&R C）
op2=>operation: 1983年，ANSI开始编制C语言标准
op3=>operation: 1988年，经过多次修订，C语言标准完成
op4=>operation: 1989年12月通过，成为ANSI标准X3.159-1989
op5=>operation: 1990年，ISO通过此项标准，成为ISO/IEC 9899-1990国际标准，即标准C（ANSI C或ANSI/ISO C）

st->op1->op2->op3->op4->op5->e
```

### 1.1.3	C++语言

**相关：**`Concurrent C` `Object C` `C++`

**C++简介：**贝尔实验室的`Bjarne Stroustrup`设计，在许多方面对C语言进行扩展，支持面向对象。

**为什么不直接学习c++：**

- C++语言比C语言更加难学，最好先精通C语言；
- 存在大量C语言代码，需要阅读和维护；
- 不是每个人都喜欢改用C++语言编程，例如，编写相对小规模程序的人就不会从C++语言中获得多少好处。

## 1.2	C语言的优缺点

+ **C语言是一种低级语言。** 作为一种适合系统编程的语言， C语言提供了对机器级概念（例如，字节和地址）的访问，而这些却是其他编程语言试图隐藏的内容。此外， C语言提供了与计算机内在指令紧密协调的操作，使得程序可以快速执行。既然应用程序要依赖操作系统进行输入/输出、存储管理以及其他众多的服务，操作系统一定不能运行得太慢。

+ **C语言是一种小型语言。** 与许多其他编程语言相比，C语言提供了二套更有限的特性集合。（在K&R第2版的参考手册中仅用49页就描述了整个C语言。）为了保持少量的特性，C语言在很大程度上依赖一个标准函数"库" （"函数"类似于其他编程语言中描述的"过程"或"子程序"）。

+ **C语言是一种包容性语言。** C语言假设用户知道自己在做什么，因此它提供了比其他许多语言更广阔的自由度。此外，不同于其他语言的是， C语言不提供详细的查错功能。

### 1.2.1	优点

+ **高效性。** 高效性是C语言与生俱来的优点之一。因为C语言原来就用于编写传统的由汇编语言编写的应用程序，所以快速运行并占用有限内存就显得至关重要了。

+ **可移植性。** 虽然程序的可移植性并不是C语言的主要目标，但是它还是成为了C语言的优点之一。当程序必须在个人计算机到超级计算机这多种机型范围内运行时，常常会用C语言来编写。C程序具有可移植性的一个原因要感谢C语言与UNlX系统的早期结合，以及后来的ANSI/ISO标准化工作。C语言正是由于标准化才没有分裂成不兼容的多种分支。另一个原因是C语言编译器规模小且容易编写，这使得此种编译器得以广泛应用。最后， C语言自身的特性也支持可移植性（尽管它没有阻止程序员编写不具有移植性的程序）。

+ **功能强大。** C语言拥有一个数据类型和运算符的庞大集合，这个集合使得C语言具有强大的表达能力，往往寥寥几行代码就可以实现许多功能。

+ **灵活性。** 虽然C语言最初的设计是为了系统编程，但是没有固有的约束将它限制在此范围内。C语言现在可以用于编写从嵌入式系统到商业数据处理的各种应用程序。此外， C语言在其特性使用上的限制非常少。在其他语言中认定为非法的操作在C语言中往往是允许的。例如， C语言允许二个字符与二个整数值相加（或者是与二个浮点数相加）。虽然灵活性可能会让某些错误溜掉，但是它却使编程变得更轻松。

+ **标准库。** C语言的一个突出优点就是它的标准库，包含了数百个函数，这些函数可以用于输入/输出、字符申处理、存储分配以及其他一些实用的操作。

+ **与UNIX系统的集成。** C语言在与UNIX系统结合方面特别强大。事实上，一些UNIX工具甚至假定用户是了解C语言的。

### 1.2.2 缺点

C语言的缺点和它的某些优点本是同根生，均来自C语言与机器的紧密性。如果可以把类似Pascal或者Ada这样的语言看成是"高级语言"的话，那么对C语言比较精确的描述应该是"低级语言"，甚至是"结构化汇编语言"。

以下是一些众所周知的问题:

+ **C语言可能会漏洞百出。** C语言的灵活性使得它成为一种会漏洞百出的语言。许多其他语言可以发现的编程错误，C语言编译器却无法检查到。从这方面来说， C语言与汇编语言极为相似，因为直到程序运行时汇编语言才能检查到大多数错误。更糟的是， C语言还包含大量不易觉察的隐患。在后续的几章中，我们将会看到，一个额外的分号可能会导致无限循环，再或者一个遗漏的&可能会引发程序崩溃。

+ **C程序可能会难以理解。** 虽然根据大多数衡量标准C语言是一种小型语言，但是它也有许多其他通用语言没有的特性（并且常常被误解）。这些特性可以用多种方式结合使用，其中的一些结合尽管编程者心知肚明，但是其他人恐怕难以理解。另一个问题就是C程序简明扼要的特性。C语言产生的时候正是人机交互最为单调乏味的时期。由此产生的后果是C语言为了保持简明将录入和编辑程序的用时减到最少。C语言的灵活性也可能是一个负面因素，某些程序员实在太高明了，甚至可以编写出除了他们自己几乎没人可以读得懂的程序。

+ **C程序可能会难以修改。** 用C语言编写大规模程序时，如果在设计中没有考虑到维护的问题，那么将很难修改。现代的编程语言通常都会提供一种称为"模块" ("单元"或者"包"）的语言特性，这一特性可以把一个大规模的程序分解成许多可管理的块。遗憾的是，C语言恰恰缺少这样的特性。

### 1.2.3	高效地使用C语言

高效地使用C语言要求在利用C语言优点的同时要避免它的缺点。以下是一些建议：

+ **学习如何规避C语言的缺陷。** 规避缺陷的提示遍布全书，只要寻找到⚠符号。如果想看到更详尽的缺陷列表，可以参考Andrew Koenig的《C陷阱与缺陷》一书。现代编译器将可以检查到常见的缺陷并且发出警告，但是没有一个编译器可以侦察出全部缺陷。

+ **使用软件工具使程序更加可靠。** C程序员是众多软件工具的制造者（和使用者）。lint 是其中一个最著名的C语言工具。(传统上由UNIX系统提供）与大多数C语言编译器相比，可以对程序进行更加广泛的错误分析。如果可以得到lint（或某个类似程序），那么使用它应该是个好主意。另一个有益的工具则是调试工具。由于C语言的本性，许多错误无法被C语言编译器查出。这些错误会以运行时错误或不正确输出的形式表现出来。因此，在实践中C程序员都必须能够很好地使用调试工具。

+ **利用现有的代码库。** 大家都在使用C是一种好处。把别人编写好的代码用于自己的程序是一个非常好的主意。C代码经常被打包进库（函数集合）。获取适当的库既可以大大减少错误，也可以节省相当多的编程工作。用于常见任务的库很容易获得，常见任务包括用户界面开发、图形学、通信、数据库管理以及网络等。有些库是公用的，而有些则是作为商品销售的。

+ **采用一套切合实际的编码规范。** 编码规范是一套设计准则，即使语言本身没有强制要求，程序员也必须遵守。适当的规范可以使程序更加统一，并且易于阅读和修改。使用任何一种编程语言都需要规范，尤其是C语言。正如前面所说的，C语言本身具有较高的灵活性，这使得程序员编写的代码可能会难以理解。本书的编程示例遵循一套编码规范，但是，还有另外一些同样有效的规范可以使用。（本书将穿插讨论一些可供选择的方法。）选用哪种并不是最重要的，重要的是必须采纳某些规范并且坚持使用它们。

+ **避免“投机取巧”和极度复杂的代码。** C语言鼓励使用编程技巧。通常用C语言完成某项指定任务时会有多种解决途径，程序员经常会尝试选择最简洁的方式。但是，千万不要没有节制，因为最简略的解决方式往往也是最难以理解的。书中将举例说明什么是简洁合理且易于理解的方式。

+ **使用标准C，少用经典C。** 标准C绝不仅仅是更好形式的经典C。标准C增加了许多允许 编译器检查错误的特性，经典C却忽略了这个问题。

+ **避免不可移植性。** 大多数C语言编译器都提供不属于标准C内容的特性和库函数。除非确有必要，否则最好尽量避免使用这些特性和库函数。
